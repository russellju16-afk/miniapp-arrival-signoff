<view class="container">
  <view class="card top-actions" wx:if="{{list.length > 0}}">
    <button class="btn-plain" bindtap="clearAll">清空足迹</button>
  </view>

  <block wx:if="{{list.length === 0}}">
    <view class="card">
      <view class="empty">暂无浏览记录</view>
      <button class="btn-primary" bindtap="goProducts">去逛商城</button>
    </view>
  </block>

  <block wx:else>
    <view class="card item" wx:for="{{list}}" wx:key="productId" data-id="{{item.productId}}" bindtap="goDetail">
      <view class="row">
        <text class="title">{{item.name || '未命名商品'}}</text>
        <text class="time">{{item.viewedAtText}}</text>
      </view>
      <view class="sub-title">商品编码：{{item.code || '-'}}</view>
      <view class="sub-title" wx:if="{{item.minPriceText}}">参考价：¥{{item.minPriceText}}</view>
      <button class="btn-plain small-btn" catchtap="removeItem" data-id="{{item.productId}}">移除</button>
    </view>
  </block>
</view>
