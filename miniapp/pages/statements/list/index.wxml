<view class="container">
  <view class="card">
    <view class="title">筛选条件</view>
    <view class="row">
      <text class="label">开始日期</text>
      <picker mode="date" value="{{from}}" bindchange="onFromChange">
        <view class="picker-value">{{from}}</view>
      </picker>
    </view>
    <view class="row">
      <text class="label">结束日期</text>
      <picker mode="date" value="{{to}}" bindchange="onToChange">
        <view class="picker-value">{{to}}</view>
      </picker>
    </view>
    <view class="actions">
      <button class="btn-primary action-btn" bindtap="search">查询</button>
      <button class="btn-plain action-btn" bindtap="goDeliveries">返回签收列表</button>
    </view>
  </view>

  <block wx:if="{{loading}}">
    <view class="empty">加载中...</view>
  </block>

  <block wx:elif="{{list.length === 0}}">
    <view class="empty">该日期范围暂无对账单</view>
  </block>

  <block wx:else>
    <view class="card item" wx:for="{{list}}" wx:key="id" bindtap="goDetail" data-id="{{item.id}}">
      <view class="row">
        <text class="label">账期</text>
        <text class="value">{{item.period_text}}</text>
      </view>
      <view class="row">
        <text class="label">金额</text>
        <text class="value">{{item.currency}} {{item.total_amount_text}}</text>
      </view>
      <view class="row">
        <text class="label">状态</text>
        <text class="value {{item.status === 'CONFIRMED' ? 'status-ok' : 'status-pending'}}">{{item.status}}</text>
      </view>
      <view class="more">查看详情 ></view>
    </view>
  </block>
</view>
